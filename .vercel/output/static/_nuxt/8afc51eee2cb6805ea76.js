/*! For license information please see LICENSES */
(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{461:function(t,e,r){"use strict";var n={components:{},props:{templateClasses:{type:String,default:"Template-Article _section-page _margin-center _margin-top-2 _margin-bottom-2 _padding-top-2 _padding-bottom-2  "},mainClasses:{type:String,default:"Template--Main _section-content _margin-bottom _margin-center "},articleClasses:{type:String,default:"_section-article _margin-center"}},data:function(){return{isMounted:!1}},computed:{},beforeCreate:function(){},mounted:function(){this.isMounted=!0},beforeDestroy:function(){},methods:{pathMatch:function(path){return!!this.route.path&&(this.route.path==path||void 0)}}},o=r(6),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{class:t.templateClasses},[r("div",{class:t.mainClasses},[t._t("container",[r("div",{class:t.articleClasses},[t._t("header"),t._v(" "),t._t("default"),t._v(" "),t._t("footer")],2)])],2)])}),[],!1,null,null,null);e.a=component.exports},463:function(t,e,r){"use strict";var n={components:{},props:{templateClasses:String,mainClasses:{type:String,default:"Template--Main "},gridClasses:{type:String,default:"Template--Main-Sidebar _grid-2-1-sm _grid-gap "},headerClasses:{type:String,default:"Template--Header _section-content _margin-bottom _margin-center _margin-top-none-i"},sidebarClasses:{type:String,default:"_sidebar"},sidebarContainerClasses:{type:String}},layout:"contentframe",middleware:"pageload",data:function(){return{isMounted:!1}},computed:{},beforeCreate:function(){},mounted:function(){this.isMounted=!0},beforeDestroy:function(){},methods:{pathMatch:function(path){return!!this.route.path&&(this.route.path==path||void 0)}}},o=r(6),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Template-Context _section-page _margin-center _padding-top-2 _padding-bottom-2 ",class:t.templateClasses},[t._t("header-container",[r("div",{class:t.headerClasses},[t._t("header")],2)]),t._v(" "),r("div",{class:t.gridClasses},[t._t("sidebar-container",[r("div",{staticClass:"Template--Sidebar",class:t.sidebarContainerClasses},[r("nav",{class:t.sidebarClasses},[t._t("sidebar"),t._v(" "),t._t("context")],2)])]),t._v(" "),t._t("main-container",[r("div",{class:t.mainClasses},[t._t("default")],2)])],2),t._v(" "),t._t("footer-container",[r("div",{staticClass:"Template--Footer"},[t._t("footer")],2)])],2)}),[],!1,null,null,null);e.a=component.exports},465:function(t,e,r){},471:function(t,e,r){"use strict";r(465)},473:function(t,e,r){"use strict";var n={props:{person:Object,manuscripts:Array},computed:{profile:function(){if(this.person.fields.ProfileImage)return this.person.fields.ProfileImage[0]},profileUrl:function(){return this.profile&&this.profile.thumbnails?this.profile.thumbnails.large.url:"https://dl.phage.directory/.attachmentThumbnails/5f73211953262a41d993a9cd077a4ec9/370c6e95"},hostNames:function(){if(this.person.fields["PhageCollections:Hosts::Names"]){var t=this.person.fields["PhageCollections:Hosts::Names"],e=this.person.fields["PhageCollections:Hosts::Slugs"];return t.map((function(t,i){return[t,e[i]]})).sort((function(a,b){return(""+a[0]).localeCompare(b[0])}))}},labs:function(){return this.person.fields["Orgs:Labs::Name"]?this.person.fields["Orgs:Labs::Name"]+"":this.person.fields["Orgs:SupervisorOf::Name"]+""},labSlugs:function(){return this.person.fields["Orgs:Labs::Slug"]?this.person.fields["Orgs:Labs::Slug"]+"":this.person.fields["Orgs:SupervisorOf::Slug"]+""},orgs:function(){var t=this;if(this.person.fields["Orgs::Names"]){var e=[];return this.person.fields["Orgs::Names"].map((function(r,i){e.push({name:t.person.fields["Orgs::Names"][i],location:t.person.fields["Orgs::Location"][i],slug:t.person.fields["Orgs::Slugs"]?t.person.fields["Orgs::Slugs"][i]:""})})),e}},url:function(){var t=this.person.fields.URL;if(t)return"http"!=t.substring(0,4)&&(t="https://"+t),t},roles:function(){return this.person.fields["Roles:Custom"]?[this.person.fields["Roles:Custom"]]:this.person.fields.Roles},jobTitle:function(){return this.person.fields.JobTitle},isPI:function(){return!!this.person.fields["Orgs:Labs:isPI"]},getTwitter:function(){var t=this.person.fields["Social:Twitter"];if(t)return"@"==t.substring(0,1)?"https://twitter.com/"+t:"http"==t.substring(0,4)?t:"https://twitter.com/"+t},getCleanTwitter:function(){if(this.getTwitter){var t=this.getTwitter.lastIndexOf("@")||this.getTwitter.lastIndexOf("/");return"@"+this.getTwitter.substring(t+1)}}},methods:{}},o=(r(471),r(6)),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"People People-card Dir-card ",attrs:{id:t.person.fields.Slug}},["Published"!=t.person.fields.Status?r("div",{staticClass:"_Stage"},[t._v("\n    Preview\n  ")]):t._e(),t._v(" "),r("div",{staticClass:"People-container _flex-row"},[r("div",{staticClass:"People-profile _margin-right"},[r("img",{staticClass:"--profile --medium",attrs:{alt:"Profile Image",src:t.profileUrl,loading:"lazy"}})]),t._v(" "),r("div",{staticClass:"People-info _flex-1"},[r("div",{},[r("div",{staticClass:"People-name People-header-block"},[r("div",{staticClass:"People-name-social _flex-row _margin-bottom-half"},[r("div",{staticClass:"Dir-title _flex-1"},[r("nuxt-link",{staticClass:"--nolink",attrs:{to:"/people#"+t.person.fields.Slug}},[t._v(t._s(t.person.fields.Name))]),t._v(" "),t.person.fields.Title?r("span",{staticClass:"Dir-personTitle"},[t._v(t._s(t.person.fields.Title))]):t._e()],1),t._v(" "),r("div",{staticClass:"Dir-social Dir-title"},[t.person.fields.Email?r("a",{staticClass:"Dir-icon --url",attrs:{href:"mailto:"+t.person.fields.Email}},[r("span",{staticClass:"_font-phage icon-mail-alt"})]):t._e(),t._v(" "),t.person.fields["Social:Linkedin"]?r("a",{staticClass:"Dir-icon --url",attrs:{href:""+t.person.fields["Social:Linkedin"]}},[r("span",{staticClass:"_font-phage icon-linkedin"})]):t._e(),t._v(" "),t.person.fields["Social:GoogleScholar"]?r("a",{staticClass:"Dir-icon --url",attrs:{href:""+t.person.fields["Social:GoogleScholar"]}},[r("span",{staticClass:"_font-phage icon-google-scholar"})]):t._e(),t._v(" "),t.person.fields["Social:ResearchGate"]?r("a",{staticClass:"Dir-icon --url",attrs:{href:""+t.person.fields["Social:ResearchGate"]}},[r("span",{staticClass:"_font-phage icon-researchgate"})]):t._e(),t._v(" "),t.person.fields["Social:ORCID"]?r("a",{staticClass:"Dir-icon --url",attrs:{href:""+t.person.fields["Social:ORCID"]}},[r("span",{staticClass:"_font-phage icon-orcid"})]):t._e(),t._v(" "),t.person.fields["Social:Publons"]?r("a",{staticClass:"Dir-icon --url",attrs:{href:""+t.person.fields["Social:Publons"]}},[r("span",{staticClass:"_font-phage icon-publons"})]):t._e(),t._v(" "),t.person.fields["Social:Twitter"]?r("a",{staticClass:"Dir-icon --url",attrs:{href:""+t.getTwitter}},[r("span",{staticClass:"_font-phage icon-twitter"})]):t._e(),t._v(" "),t.person.fields["Social:Github"]?r("a",{staticClass:"Dir-icon --url",attrs:{href:""+t.person.fields["Social:Github"]}},[r("span",{staticClass:"_font-phage icon-github-circled"})]):t._e()])]),t._v(" "),t.person.fields.Short?r("div",{staticClass:"People-name-short _margin-bottom"},[r("div",{domProps:{innerHTML:t._s(t.$md.strip(t.$md.render(t.person.fields.Short||"")))}})]):t._e(),t._v(" "),t.roles||t.jobTitle?r("div",{staticClass:"People-roles _font-small "},[t._l(t.roles,(function(e){return r("span",{key:e,staticClass:"_tag"},[t._v(t._s(e))])})),t._v(" "),t.jobTitle?r("span",{staticClass:"_tag"},[t._v(t._s(t.jobTitle))]):t._e()],2):t._e(),t._v(" "),r("div",{staticClass:"People-orgs Dir-row _margin-top _margin-bottom-2"},[t.person.fields["Orgs:Labs::Name"]||t.person.fields["Orgs:SupervisorOf::Name"]?r("div",{staticClass:"_margin-bottom-half"},[t.labSlugs?r("nuxt-link",{staticClass:"People-orgs-labs --url",attrs:{to:"/labs#"+t.labSlugs}},[t._v(t._s(t.labs))]):r("span",[t._v(t._s(t.labs))]),t.isPI?r("span",{staticClass:"People-orgs-PI"},[t._v(" (PI)")]):t._e(),t._v(",\n            ")],1):t._e(),t._v(" "),t.orgs?r("div",{staticClass:"_margin-bottom-half"},[t._l(t.orgs,(function(e){return r("div",{key:e.name,staticClass:"People-orgs-name _padding-bottom-half _padding-top-half"},[t.person.fields["Orgs::Slugs"][0]?r("nuxt-link",{attrs:{to:"/orgs#"+t.person.fields["Orgs::Slugs"][0]}},[t._v(" "+t._s(e.name+""))]):r("span",[t._v(" "+t._s(e.name+""))]),e.location?r("span",[t._v(", "+t._s(e.location))]):t._e()],1)})),t._v(" "),t.person.fields["Orgs:Custom"]?r("span",{staticClass:"People-orgs-custom"},[t._v("\n                "+t._s(t.person.fields["Orgs:Custom"])+"\n              ")]):t._e()],2):t._e()])]),t._v(" "),r("div",{staticClass:"People-info-block Dir-block _margin-top-2"},[t.person.fields.Email?r("div",{staticClass:"Dir-row-half _grid-1-6-xs _align-vertically"},[r("span",{staticClass:"Dir-label"},[t._v("Email ")]),r("a",{staticClass:"_wordbreak --url --none",attrs:{href:"mailto:"+t.person.fields.Email}},[t._v(t._s(t.person.fields.Email))])]):t._e(),t._v(" "),t.person.fields["Social:Twitter"]?r("div",{staticClass:"Dir-row-half _grid-1-6-xs _align-vertically"},[r("span",{staticClass:"Dir-label"},[t._v("Twitter ")]),r("a",{staticClass:"_wordbreak --url --none",attrs:{href:""+t.getTwitter}},[t._v(t._s(t.getCleanTwitter))])]):t._e(),t._v(" "),t.url?r("div",{staticClass:"Dir-row-half _grid-1-6-xs _align-baseline"},[r("span",{staticClass:"Dir-label"},[t._v("Website ")]),r("a",{staticClass:"_wordbreak --url --none",attrs:{href:t.url}},[t._v(t._s(t.url))])]):t._e(),t._v(" "),t.person.fields.Skills||t.person.fields["Skills:Custom"]?r("div",{staticClass:"People-skills Dir-row _grid-1-6-xs _align-baseline"},[r("span",{staticClass:"Dir-label"},[t._v("Skills ")]),r("p",[r("span",[t._v(t._s(t.person.fields.Skills?t.person.fields.Skills.join(", "):t.person.fields["Skills:Custom"]))])])]):t._e()]),t._v(" "),t.person.fields.Description?r("div",{staticClass:"People-desc-block Dir-block _margin-top-2"},[r("div",{staticClass:"People-description Dir-row"},[r("div",{staticClass:"_md-pfix",domProps:{innerHTML:t._s(t.$md.render(t.person.fields.Description||""))}})])]):t._e()]),t._v(" "),t.hostNames&&t.hostNames.length>0?r("div",{staticClass:"People-phage-block Dir-block"},[r("div",{staticClass:"Dir-label"},[t._v("Phage Hosts")]),t._v(" "),r("div",{staticClass:"Dir-miniCard"},t._l(t.hostNames,(function(e){return r("div",{key:e[0]+"-"+t.person.id,staticClass:"_organism-container"},[r("nuxt-link",{staticClass:"_organism",attrs:{to:"/hosts#"+e[1]}},[t._v(t._s(e[0]))])],1)})),0)]):t._e(),t._v(" "),t.manuscripts&&t.manuscripts.length>0?r("div",{staticClass:"People-manuscripts-block Dir-block"},[r("div",{staticClass:"Dir-miniCard"},[r("h6",{staticClass:"_padding-bottom-half"},[t._v("Capsid & Tail")]),t._v(" "),t._l(t.manuscripts,(function(e){return r("div",{key:e.id+"-"+t.person.fields.Slug,staticClass:"_manuscripts-container"},[r("nuxt-link",{staticClass:"_manuscript --nolink _margin-bottom-half _inline-block _font-small",attrs:{to:"/capsid/"+e.fields.Slug,target:"_blank"},domProps:{innerHTML:t._s(t.$md.strip(t.$md.render(e.fields["Data:IssueName"]||"")))}})],1)})),t._v(" "),t.manuscripts.length>3?r("div",{staticClass:"Dir-block _font-small Dir-disabled"},[t._v("Number of articles: "+t._s(t.manuscripts.length))]):t._e()],2)]):t._e(),t._v(" "),r("div",{staticClass:"People-share _font-small _margin-top-2"},[t._v("\n        Share: "),r("a",{attrs:{href:"https://phage.directory/people#"+t.person.fields.Slug}},[t._v("https://phage.directory/people#"+t._s(t.person.fields.Slug))])])])])])}),[],!1,null,null,null);e.a=component.exports},480:function(t,e,r){"use strict";var n=r(12),o=100,l={props:{input:Object,type:String,inputAttrs:String,v:Object,onSubmit:Boolean,submitHandler:Function},data:function(){return{data:this.input.initial||""}},computed:{isFieldInvalid:function(){if(this.v)return this.v.$invalid},errorMessage:function(){if(this.onSubmit)return this.input.error&&"string"==typeof this.input.error?this.input.error:"EMAIL"!=this.input.type||this.v.email?this.onSubmit&&!this.v.required?"This field is required":void 0:"Please enter a valid email"}},methods:{emit:new(r.n(n).a.debounce)((function(t){"InputEvent"==t&&console.log("INPUT EVENT!!"),this.$emit("input",this.data),o=100}),o,{trailing:!0}),emitOnSubmit:function(){this.onSubmit&&this.$emit("input",this.data)},emitOnBlur:function(){this.onSubmit&&this.$emit("blur",this.data)},keyEnterHandler:function(){this.submitHandler()}}},c=r(6),component=Object(c.a)(l,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Formlet Formlet-input _form-control --float"},[t.input.action?r("div",{staticClass:"_action _flex-row-sm"},[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.data,expression:"data",modifiers:{trim:!0}}],staticClass:"_form-input --width-full",class:t.data?"--data "+t.inputAttrs:t.inputAttrs,attrs:{id:t.input.name,name:t.input.name,placeholder:t.input.placeholder,required:t.input.required,type:"text",list:t.input.options?"input_options":void 0},domProps:{value:t.data},on:{input:[function(e){e.target.composing||(t.data=e.target.value.trim())},t.emit],blur:[t.emitOnBlur,function(e){return t.$forceUpdate()}],change:t.emit,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyEnterHandler(e)}}}),t._v(" "),t.input.name?r("label",{staticClass:"_form-label",class:t.data?"--data":"",attrs:{for:t.input.name},domProps:{innerHTML:t._s(t.$md.render(t.input.label||""))}}):t._e(),t._v(" "),r("input",{staticClass:"_button _flex-1 --outline _margin-bottom-none ",staticStyle:{height:"auto"},attrs:{type:"submit"},domProps:{value:t.input.action},on:{click:t.keyEnterHandler}})]):r("div",[r("input",{directives:[{name:"model",rawName:"v-model.trim",value:t.data,expression:"data",modifiers:{trim:!0}}],staticClass:"_form-input --width-full",class:t.data?"--data "+t.inputAttrs:t.inputAttrs,attrs:{id:t.input.name,name:t.input.name,placeholder:t.input.placeholder,required:t.input.required,type:"text",list:t.input.options?"input_options_"+t.input.name:void 0},domProps:{value:t.data},on:{input:[function(e){e.target.composing||(t.data=e.target.value.trim())},t.emit],blur:[t.emitOnBlur,function(e){return t.$forceUpdate()}],change:t.emit,keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.keyEnterHandler(e)}}}),t._v(" "),t.input.name?r("label",{staticClass:"_form-label",class:t.data?"--data":"",attrs:{for:t.input.name},domProps:{innerHTML:t._s(t.$md.render(t.input.label||""))}}):t._e()]),t._v(" "),t.isFieldInvalid&&t.errorMessage?r("label",{staticClass:"_error"},[t._v(t._s(t.errorMessage))]):t._e(),t._v(" "),t.input.options?r("datalist",{attrs:{id:"input_options_"+t.input.name}},t._l(t.input.options,(function(e){return r("option",{key:e.value,domProps:{value:e.value}},[t._v(t._s(e.label))])})),0):t._e()])}),[],!1,null,"0677767c",null);e.a=component.exports},481:function(t,e,r){"use strict";var n=r(12),o={props:{input:Object,type:String,inputAttrs:String,v:Object,onSubmit:Boolean},data:function(){return{data:this.input.initial||""}},computed:{isFieldInvalid:function(){if(this.v)return this.v.$invalid},errorMessage:function(){return this.input.maxLength&&!this.v.maxLength?"Please stay under the character limit":this.onSubmit?this.input.error&&"string"==typeof this.input.error?this.input.error:this.onSubmit&&!this.v.required?"This field is required":void 0:void 0}},mounted:function(){this.$nextTick((function(){}))},methods:{emit:r.n(n).a.debounce((function(t){this.$emit("input",this.data),this.input.expand&&(t.target.style.height="auto",t.target.style.height=t.target.scrollHeight+"px")}),100,{trailing:!0}),emitOnSubmit:function(){this.onSubmit&&this.$emit("input",this.data)}}},l=r(6),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Formlet Formlet-textarea _form-control"},[t.input.name?r("label",{staticClass:"_form-label",attrs:{for:t.input.name},domProps:{innerHTML:t._s(t.$md.render(t.input.label||""))}}):t._e(),t._v(" "),t.input.description?r("label",{staticClass:"_form-desc",attrs:{for:t.input.name},domProps:{innerHTML:t._s(t.$md.render(t.input.description||""))}}):t._e(),t._v(" "),r("textarea",{directives:[{name:"model",rawName:"v-model.trim",value:t.data,expression:"data",modifiers:{trim:!0}}],ref:"textarea",staticClass:"_form-input _block",class:t.inputAttrs,attrs:{id:t.input.name,name:t.input.name,placeholder:t.input.placeholder,required:t.input.required,rows:t.input.rows||4,type:"text"},domProps:{value:t.data},on:{input:[function(e){e.target.composing||(t.data=e.target.value.trim())},t.emit],blur:[t.emit,function(e){return t.$forceUpdate()}],change:t.emit}}),t._v(" "),t.input.maxLength?r("label",{staticClass:"_font-small _padding-top-half"},[0!=t.v.maxLength?r("span",[t._v("Characters: "+t._s(t.data.length))]):r("span",[t._v("Characters: "+t._s(t.input.maxLength-t.data.length)+" ")])]):t._e(),t._v(" "),t.isFieldInvalid&&t.errorMessage?r("label",{staticClass:"_error"},[t._v(t._s(t.errorMessage))]):t._e()])}),[],!1,null,"770bb835",null);e.a=component.exports},484:function(t,e,r){"use strict";var n={props:{org:Object,phageCollections:Array},computed:{logo:function(){if(this.org.fields.ProfileImage)return this.org.fields.ProfileImage[0]},logoUrl:function(){return this.logo?this.logo.url:""},members:function(){var t=this,e=[];if(this.org.fields["People:Supervisors::Names"]&&this.org.fields["People:Supervisors::Names"].map((function(r,i){var n="";t.org.fields["People:Supervisors::Slugs"]&&(n=t.org.fields["People:Supervisors::Slugs"][i]),e.push({name:t.org.fields["People:Supervisors::Names"][i],slug:n})})),this.org.fields["People:OrgMembers::Names"]&&this.org.fields["People:OrgMembers::Names"].map((function(r,i){var n="";t.org.fields["People:OrgMembers::Slugs"]&&(n=t.org.fields["People:OrgMembers::Slugs"][i]),e.push({name:t.org.fields["People:OrgMembers::Names"][i],slug:n})})),0!=e.length)return e},linkedPhageCollections:function(){return this.$cytosis.getLinkedRecords(this.org.fields.PhageCollections,this.phageCollections,!0).reverse()},url:function(){var t=this.org.fields.URL;if(t)return"http"!=t.substring(0,4)&&(t="https://"+t),t},getTwitter:function(){var t=this.org.fields["Social:Twitter"];if(t)return"@"==t.substring(0,1)?"https://twitter.com/"+t:"http"==t.substring(0,4)?t:"https://twitter.com/"+t},getCleanTwitter:function(){if(this.getTwitter){var t=this.getTwitter.lastIndexOf("@")||this.getTwitter.lastIndexOf("/");return"@"+this.getTwitter.substring(t+1)}}},methods:{sortHostNames:function(t){var e=t.fields["Hosts::Names"],r=t.fields["Hosts::Slugs"],n=e.map((function(t,i){return[t,r[i]]}));return n=n.sort((function(a,b){return(""+a[0]).localeCompare(b[0])}))}}},o=r(6),component=Object(o.a)(n,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Org Org-Card Dir-card ",attrs:{id:t.org.fields.Slug}},[r("div",{staticClass:"Org-container"},[r("div",{staticClass:"Org-info _width-100",class:t.logoUrl?"_grid-1-3":""},[t.logoUrl?r("div",{staticClass:"Dir-logo"},[r("a",{staticClass:"_inline-block",attrs:{href:t.org.fields.URL}},[r("img",{attrs:{src:t.logoUrl,alt:t.org.fields.Name+" Logo",loading:"lazy"}})])]):t._e(),t._v(" "),r("div",{},[r("div",{},[r("div",{staticClass:"Org-name-social _flex-row"},[r("div",{staticClass:"_flex-1"},[r("div",{staticClass:"Dir-title --title _padding-bottom-none-i"},[t._v(t._s(t.org.fields.Name))]),t._v(" "),t.org.fields.AltName?r("h5",{staticClass:"_font-small _padding-none"},[t._v(t._s(t.org.fields.AltName))]):t._e()]),t._v(" "),r("div",{staticClass:"Dir-social Dir-title"},[t.org.fields.Email?r("a",{staticClass:"Dir-icon --url",attrs:{href:"mailto:"+t.org.fields.Email}},[r("span",{staticClass:"_font-phage icon-mail-alt"})]):t._e(),t._v(" "),t.org.fields["Social:Linkedin"]?r("a",{staticClass:"Dir-icon --url",attrs:{href:""+t.org.fields["Social:Linkedin"]}},[r("span",{staticClass:"_font-phage icon-linkedin"})]):t._e(),t._v(" "),t.org.fields["Social:Twitter"]?r("a",{staticClass:"Dir-icon --url",attrs:{href:""+t.getTwitter}},[r("span",{staticClass:"_font-phage icon-twitter"})]):t._e()])])]),t._v(" "),t.org.fields["Org:Types:Custom"]?r("div",{staticClass:"_margin-top-half"},[r("span",{staticClass:"_tag"},[t._v(t._s(t.org.fields["Org:Types:Custom"]))])]):t.org.fields["Org:Types"]?r("div",{staticClass:"_margin-top-half"},t._l(t.org.fields["Org:Types"],(function(e){return r("span",{key:e,staticClass:"_tag"},[t._v(t._s(e))])})),0):t._e()])]),t._v(" "),r("div",{staticClass:"People-info-block Dir-block"},[r("div",[t.org.fields.ContactPerson?r("div",{staticClass:"Dir-row-half _grid-1-6-xs _align-vertically"},[r("span",{staticClass:"Dir-label"},[t._v("Contact ")]),r("span",[t._v(t._s(t.org.fields.ContactPerson))])]):t._e(),t._v(" "),t.org.fields.Email?r("div",{staticClass:"Dir-row-half _grid-1-6-xs _align-vertically"},[r("span",{staticClass:"Dir-label"},[t._v("Email ")]),r("a",{staticClass:"_wordbreak --url --none",attrs:{href:"mailto:"+t.org.fields.Email}},[t._v(t._s(t.org.fields.Email))])]):t._e(),t._v(" "),t.url?r("div",{staticClass:"Dir-row-half _grid-1-6-xs _align-vertically"},[r("span",{staticClass:"Dir-label"},[t._v("Website ")]),r("a",{staticClass:"_wordbreak --url --none",attrs:{href:t.url}},[t._v(t._s(t.url))])]):t._e()]),t._v(" "),r("div",[t.org.fields["Social:Twitter"]?r("div",{staticClass:"Dir-row-half _grid-1-6-xs _align-vertically"},[r("span",{staticClass:"Dir-label"},[t._v("Twitter ")]),r("a",{staticClass:"_wordbreak --url --none",attrs:{href:""+t.getTwitter}},[t._v(t._s(t.getCleanTwitter))])]):t._e(),t._v(" "),t.org.fields["Social:Linkedin"]?r("div",{staticClass:"Dir-row-half _grid-1-6-xs _align-vertically"},[r("span",{staticClass:"Dir-label"},[t._v("LinkedIn ")]),r("a",{staticClass:"_wordbreak --url --none",attrs:{href:""+t.org.fields["Social:Linkedin"]}},[t._v(t._s(t.org.fields["Social:Linkedin"]))])]):t._e()])]),t._v(" "),t.org.fields.Description?r("div",{staticClass:"Dir-people Dir-block"},[r("div",{domProps:{innerHTML:t._s(t.$md.render(t.org.fields.Description||""))}})]):t._e(),t._v(" "),t.members?r("div",{staticClass:"Dir-people Dir-block"},[t._m(0),t._v(" "),r("div",{staticClass:"Dir-miniCard"},t._l(t.members,(function(e){return r("span",{key:e.id,staticClass:"_commas"},[e.slug?r("nuxt-link",{staticClass:"--url",attrs:{to:"/people#"+e.slug}},[t._v(t._s(e.name))]):r("span",[t._v(t._s(e.name))])],1)})),0)]):t._e(),t._v(" "),t.linkedPhageCollections.length>0?r("div",{staticClass:"Dir-phages Dir-block"},[t._m(1),t._v(" "),t._l(t.linkedPhageCollections,(function(e,i){return r("div",{key:e.id,staticClass:"Dir-miniCard"},[r("div",{},[r("div",{staticClass:"Dir-subtitle"},[t._v(t._s(e.fields["Name:Nice"]))]),t._v(" "),r("div",[e.fields["Owners:People::Slug"][i]?r("nuxt-link",{staticClass:"--url",attrs:{to:"/people#"+e.fields["Owners:People::Slug"]}},[t._v(t._s(e.fields["Owners:People::Name"][0]))]):r("span",[t._v(t._s(e.fields["Owners:People::Name"][0]))]),e.fields["Owners:People::Roles"].length>0?r("span",[t._v(" "+t._s(e.fields["Owners:People::Roles"].join(", ")))]):t._e()],1),t._v(" "),r("div",{staticClass:"Dir-block"},[t._v("Phage hosts: "+t._s(t.sortHostNames(e).length))])]),t._v(" "),r("div",{staticClass:"Dir-block"},t._l(t.sortHostNames(e),(function(e){return r("div",{key:e[0]},[r("nuxt-link",{staticClass:"_organism",attrs:{to:"/hosts#"+e[1]}},[t._v(t._s(e[0]))])],1)})),0)])}))],2):t._e()])])}),[function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"Dir-label"},[this._v("Members")])])},function(){var t=this.$createElement,e=this._self._c||t;return e("div",[e("span",{staticClass:"Dir-label"},[this._v("Phage Collections")])])}],!1,null,null,null);e.a=component.exports},528:function(t,e,r){"use strict";r.r(e);var n=r(4),o=r.n(n),l=r(3),c=r.n(l),d=r(463),f=r(47),h=r.n(f),v=r(480),m=r(481),_=r(484);function y(){y=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",d=n.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof _?e:_,l=Object.create(o.prototype),c=new I(n||[]);return l._invoke=function(t,e,r){var n="suspendedStart";return function(o,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw l;return N()}for(r.method=o,r.arg=l;;){var c=r.delegate;if(c){var d=T(c,r);if(d){if(d===m)continue;return d}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var f=v(t,e,r);if("normal"===f.type){if(n=r.done?"completed":"suspendedYield",f.arg===m)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(n="completed",r.method="throw",r.arg=f.arg)}}}(t,r,c),l}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var m={};function _(){}function C(){}function P(){}var w={};f(w,l,(function(){return this}));var S=Object.getPrototypeOf,L=S&&S(S(E([])));L&&L!==e&&r.call(L,l)&&(w=L);var k=P.prototype=_.prototype=Object.create(w);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var n;this._invoke=function(l,c){function d(){return new e((function(n,d){!function n(l,c,d,f){var h=v(t[l],t,c);if("throw"!==h.type){var m=h.arg,_=m.value;return _&&"object"==o()(_)&&r.call(_,"__await")?e.resolve(_.__await).then((function(t){n("next",t,d,f)}),(function(t){n("throw",t,d,f)})):e.resolve(_).then((function(t){m.value=t,d(m)}),(function(t){return n("throw",t,d,f)}))}f(h.arg)}(l,c,n,d)}))}return n=n?n.then(d,d):d()}}function T(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=v(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,m;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function E(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return C.prototype=P,f(k,"constructor",P),f(P,"constructor",C),C.displayName=f(P,d,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===C||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,P):(t.__proto__=P,f(t,d,"GeneratorFunction")),t.prototype=Object.create(k),t},t.awrap=function(t){return{__await:t}},O(x.prototype),f(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,l){void 0===l&&(l=Promise);var c=new x(h(e,r,n,o),l);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},O(k),f(k,d,"Generator"),f(k,l,(function(){return this})),f(k,"toString",(function(){return"[object Generator]"})),t.keys=function(object){var t=[];for(var e in object)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in object)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return l.type="throw",l.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),d=r.call(o,"finallyLoc");if(c&&d){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=t,l.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(l)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),F(e),m}},catch:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var n=r.arg;F(e)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},t}var C,P={components:{Template:d.a,Card:_.a,FormletInputFloat:v.a,FormletTextArea:m.a},props:{profileslug:String,passcode:String,profileProp:Object},layout:"contentframe",middleware:"pageload",meta:{tableQueries:["_content-copy"]},data:function(){var t,e=this.profileProp.payload;return e.fields.ProfileImage&&e.fields.ProfileImage[0]&&(t=e.fields.ProfileImage[0].url),{tableType:this.profileProp.meta.table,profile:e,files:[],avatar:t,avatar_link:!1,avatar_clear:!1,isSaving:!1,hasChanged:!1,message:"",isStaging:"stage",input_name:{initial:e.fields.Name,name:"Name",label:"Organization Name",description:"",placeholder:"Full Organization Name",type:"FLOAT"},input_altname:{initial:e.fields.AltName,name:"AltName",label:"Alt Org Name",description:"",placeholder:"e.g. NCTC",type:"FLOAT"},input_orgtype:{initial:e.fields["Org:Types:Custom"]||e.fields["Org:Types"],name:"Org:Types:Custom",label:"Organization Type",description:"",placeholder:"",type:"INPUT",options:[{value:"Biotech"},{value:"Pharma"},{value:"Non-profit"},{value:"Phage Bank"},{value:"Government"},{value:"Regulatory"},{value:"Funding Agency"},{value:"Tech (ML, AI, Bioinformatics)"},{value:"Consultancy"},{value:"CRO"},{value:"CRMO"},{value:"Phage Manufacturer"}]},input_description:{initial:e.fields.Description,rows:6,name:"Description",description:"__Organization Description__",placeholder:"My phage organization does this really well.",type:"TEXTAREA"},input_avatarlink:{initial:"",name:"ImageURL",label:"Upload Image from URL",placeholder:"https://phage.directory/icon.png",type:"FLOAT"},input_city:{initial:e.fields.City,name:"City",label:"City",placeholder:"Atlanta",type:"FLOAT"},input_state:{initial:e.fields.State,name:"State",label:"US State",placeholder:"GA",type:"FLOAT"},input_country:{initial:e.fields.Country,name:"Country",label:"Country",placeholder:"United States",type:"FLOAT"},input_website:{initial:e.fields.URL,name:"URL",label:"Website URL",description:"",placeholder:"http://organization.com",type:"FLOAT"},input_contactperson:{initial:e.fields.ContactPerson,name:"ContactPerson",label:"Organization Contact Person",placeholder:"John D. Smith",type:"FLOAT"},input_email:{initial:e.fields.Email,name:"Email",label:"Organization Contact Email",placeholder:"marketing@organization.com",type:"FLOAT"},input_twitter:{initial:e.fields["Social:Twitter"],name:"Social:Twitter",label:"Twitter",placeholder:"@organization_twitter",type:"FLOAT"},input_linkedin:{initial:e.fields["Social:Linkedin"],name:"Social:Linkedin",label:"LinkedIn URL",placeholder:"https://linkedin.com/in/organization",type:"FLOAT"}}},computed:{ProfileTitle:function(){return this.profile.fields.Name&&""!=this.profile.fields.Name.trim()?"".concat(this.profile.fields.Name," Profile"):"New Organization Profile"}},methods:{updateProfile:function(t,data){this.profile.fields[t]=data,this.profile.__ob__.dep.notify(),this.hasChanged=!0},saveData:(C=c()(y().mark((function t(){var e,r,n,o,l;return y().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new FormData,this.isSaving=!0,this.message="Saving your profile...",r={profileslug:this.profileslug,passcode:this.passcode,type:"UPDATE",table:this.tableType,avatar_link:this.avatar_link,avatar_clear:this.avatar_clear,data:this.profile.fields},this.files&&this.files[0]&&(console.log("adding avatar ::: ",this.files[0]),e.append("avatar",this.files[0])),e.append("type","UPDATE"),e.append("profile",JSON.stringify(r)),console.log(" >>>> submitting >>>>",r),t.next=10,h()({method:"post",url:void 0+"/api/profile",data:e,headers:{"Content-Type":"multipart/form-data"}});case 10:(n=t.sent).data&&n.data.meta?(l=n.data.payload,this.profile=l,this.isSaving=!1,this.message="Profile successfully saved!",l.fields.ProfileImage&&l.fields.ProfileImage[0]&&(o=l.fields.ProfileImage[0].url,this.input_avatarlink={initial:"",name:"ImageURL",label:"Image URL",placeholder:"",type:"FLOAT"}),this.files=void 0,this.avatar=o,this.avatar_link=!1,this.avatar_clear=!1):(this.isSaving=!1,this.message="Profile could not be saved.");case 12:case"end":return t.stop()}}),t,this)}))),function(){return C.apply(this,arguments)}),setAvatar:function(data){console.log(" >>>>> SET AVATAR ",data),""==data?(this.avatar=void 0,this.profile.fields.ProfileImage=void 0,this.hasChanged=!0):(this.avatar=data,this.avatar_link=data,this.profile.fields.ProfileImage=[{url:data}],this.hasChanged=!0)},clearAvatar:function(){this.files=void 0,this.avatar=void 0,this.profile.fields.ProfileImage=[],this.avatar_clear=!0,this.$refs.avatar.value="",this.hasChanged=!0},uploadAvatar:function(t){var e=this;if(console.log("upload avatar: ",t.target.files),this.files=t.target.files,this.hasChanged=!0,this.files&&this.files[0]){console.log("File: ",this.files[0]);var r=new FileReader;r.onload=function(t){e.avatar=t.target.result},r.readAsDataURL(this.files[0])}}}},w=r(6),S=Object(w.a)(P,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Profile-edit-orgs"},[r("Template",{attrs:{"sidebar-classes":"--sticky --top-1","grid-classes":"Template--Main-Sidebar _grid-4-1-sm _grid-gap "},scopedSlots:t._u([{key:"header",fn:function(){return[r("h1",{},[t._v(t._s(t.ProfileTitle))]),t._v(" "),r("div",{staticClass:"Profile-edit-preview _margin-top-2 _card _padding"},[r("h6",[t._v("Organization Preview")]),t._v(" "),r("Card",{staticClass:"Profile-edit-preview-card",attrs:{org:t.profile}})],1),t._v(" "),r("div",{staticClass:"Profile-editor _divider-top-half "},[r("h6",[t._v("Organization Profile")]),t._v(" "),r("div",{staticClass:"Profile-edit-background _card _padding _color-bg-white"},[r("p",{staticClass:"_font-bold"},[t._v("Background Information")]),t._v(" "),r("div",{staticClass:"Profile-edit-name"},[r("FormletInputFloat",{attrs:{input:t.input_name,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Name",data)}}})],1),t._v(" "),r("div",{staticClass:"_grid-2"},[r("FormletInputFloat",{attrs:{input:t.input_altname,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("AltName",data)}}}),t._v(" "),r("FormletInputFloat",{attrs:{input:t.input_orgtype,type:"text","input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Org:Types:Custom",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-description _margin-top-2"},[r("FormletTextArea",{attrs:{input:t.input_description,"submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Description",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-location _margin-top-2"},[r("div",{staticClass:"_grid-3"},[r("div",{staticClass:"Profile-edit-city"},[r("FormletInputFloat",{attrs:{input:t.input_city,type:"text","input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("City",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-state"},[r("FormletInputFloat",{attrs:{input:t.input_state,type:"text","input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("State",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-country"},[r("FormletInputFloat",{attrs:{input:t.input_country,type:"text","input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Country",data)}}})],1)])]),t._v(" "),r("div",{staticClass:"Profile-edit-avatar-section _margin-top-2"},[r("div",{staticClass:"_font-bold _margin-bottom-half"},[t._v("Organization Logo")]),t._v(" "),r("div",{staticClass:"Profile-avatar-container _card _padding _form-control"},[r("div",{staticClass:"Profile-avatar-grid _flex-row-sm"},[r("div",{staticClass:"Profile-avatar-preview"},[t.avatar?r("div",{staticClass:"_padding-right"},[r("img",{staticStyle:{"max-width":"400px"},attrs:{src:t.avatar}})]):t._e()]),t._v(" "),r("div",{staticClass:"Profile-avatar-control _flex-1"},[r("label",{staticClass:"_button --outline",attrs:{for:"Profile-avatar"}},[t.avatar?r("span",[t._v("Change Logo Image")]):r("span",[t._v("Upload Logo Image")])]),t._v(" "),t.avatar?r("button",{on:{click:t.clearAvatar}},[t._v("Clear Logo")]):t._e(),t._v(" "),r("FormletInputFloat",{key:t.input_avatarlink.initial,attrs:{input:t.input_avatarlink,"input-attrs":"--open",type:"text","submit-handler":t.saveData},on:{input:function(data){t.setAvatar(data)}}}),t._v(" "),r("input",{ref:"avatar",staticClass:"Profile-avatar",staticStyle:{display:"none"},attrs:{id:"Profile-avatar",type:"file"},on:{input:t.uploadAvatar}})],1)]),t._v(" "),r("div",{staticClass:"_font-small"},[t._v("Note: your image might be cropped â€” please save to preview your final profile")])])]),t._v(" "),r("div",{staticClass:"Profile-edit-ctabar _margin-top",class:t.hasChanged?"":"--notChanged"},[r("div",{staticClass:"_grid-1-3 _align-vertically"},[r("div",[t.isSaving?t._e():r("button",{staticClass:"_button _width-full _margin-bottom-none-i",on:{click:t.saveData}},[t._v("Save Changes")]),t._v(" "),t.isSaving?r("button",{staticClass:"_button _width-full _margin-bottom-none-i --disabled"},[r("span",{staticClass:"_inine-block _margin-right-2 _spinner"}),t._v(" Saving...")]):t._e()]),t._v(" "),t.message?r("div",{staticClass:"Profile-edit-message _margin-bottom-none-i"},[t._v(t._s(t.message))]):t._e()])])])]),t._v(" "),r("div",{staticClass:"Profile-edit-contact _divider-top-half "},[r("h6",{staticClass:"_font-bold"},[t._v("Organization Contact")]),t._v(" "),r("div",{staticClass:"_card _padding _color-bg-white"},[r("div",{staticClass:"Profile-edit-website"},[r("FormletInputFloat",{attrs:{input:t.input_website,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("URL",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-social _grid-2"},[r("div",{staticClass:"Profile-edit-contactname"},[r("FormletInputFloat",{attrs:{input:t.input_contactperson,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("ContactPerson",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-email"},[r("FormletInputFloat",{attrs:{input:t.input_email,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Email",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-twitter"},[r("FormletInputFloat",{attrs:{input:t.input_twitter,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:Twitter",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-linkedin"},[r("FormletInputFloat",{attrs:{input:t.input_linkedin,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:Linkedin",data)}}})],1)]),t._v(" "),r("div",{staticClass:"Profile-edit-ctabar _margin-top",class:t.hasChanged?"":"--notChanged"},[r("div",{staticClass:"_grid-1-3 _align-vertically"},[r("div",[t.isSaving?t._e():r("button",{staticClass:"_button _width-full _margin-bottom-none-i",on:{click:t.saveData}},[t._v("Save Changes")]),t._v(" "),t.isSaving?r("button",{staticClass:"_button _width-full _margin-bottom-none-i --disabled"},[r("span",{staticClass:"_inine-block _margin-right-2 _spinner"}),t._v(" Saving...")]):t._e()]),t._v(" "),t.message?r("div",{staticClass:"Profile-edit-message _margin-bottom-none-i"},[t._v(t._s(t.message))]):t._e()])])])])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports,L=r(473);function k(){k=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",d=n.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof _?e:_,l=Object.create(o.prototype),c=new I(n||[]);return l._invoke=function(t,e,r){var n="suspendedStart";return function(o,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw l;return N()}for(r.method=o,r.arg=l;;){var c=r.delegate;if(c){var d=T(c,r);if(d){if(d===m)continue;return d}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var f=v(t,e,r);if("normal"===f.type){if(n=r.done?"completed":"suspendedYield",f.arg===m)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(n="completed",r.method="throw",r.arg=f.arg)}}}(t,r,c),l}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var m={};function _(){}function y(){}function C(){}var P={};f(P,l,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(E([])));S&&S!==e&&r.call(S,l)&&(P=S);var L=C.prototype=_.prototype=Object.create(P);function O(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function x(t,e){var n;this._invoke=function(l,c){function d(){return new e((function(n,d){!function n(l,c,d,f){var h=v(t[l],t,c);if("throw"!==h.type){var m=h.arg,_=m.value;return _&&"object"==o()(_)&&r.call(_,"__await")?e.resolve(_.__await).then((function(t){n("next",t,d,f)}),(function(t){n("throw",t,d,f)})):e.resolve(_).then((function(t){m.value=t,d(m)}),(function(t){return n("throw",t,d,f)}))}f(h.arg)}(l,c,n,d)}))}return n=n?n.then(d,d):d()}}function T(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,T(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=v(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,m;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function E(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return y.prototype=C,f(L,"constructor",C),f(C,"constructor",y),y.displayName=f(C,d,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,f(t,d,"GeneratorFunction")),t.prototype=Object.create(L),t},t.awrap=function(t){return{__await:t}},O(x.prototype),f(x.prototype,c,(function(){return this})),t.AsyncIterator=x,t.async=function(e,r,n,o,l){void 0===l&&(l=Promise);var c=new x(h(e,r,n,o),l);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},O(L),f(L,d,"Generator"),f(L,l,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(object){var t=[];for(var e in object)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in object)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return l.type="throw",l.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),d=r.call(o,"finallyLoc");if(c&&d){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=t,l.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(l)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),F(e),m}},catch:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var n=r.arg;F(e)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},t}var O={components:{Template:d.a,Card:L.a,FormletInputFloat:v.a,FormletTextArea:m.a},props:{profileslug:String,passcode:String,profileProp:Object},layout:"contentframe",middleware:"pageload",meta:{tableQueries:["_content-copy"]},data:function(){var t,e=this.profileProp.payload;return e.fields.ProfileImage&&e.fields.ProfileImage[0]&&(t=e.fields.ProfileImage[0].url),{tableType:this.profileProp.meta.table,profile:e,files:[],avatar:t,avatar_link:!1,avatar_clear:!1,isSaving:!1,hasChanged:!1,message:"",isStaging:"stage",input_title:{initial:e.fields.Title,name:"Title",label:"Title",placeholder:"PhD",type:"FLOAT"},input_firstName:{initial:e.fields.FirstName,name:"FirstName",label:"First Name",placeholder:"John",type:"FLOAT"},input_middleName:{initial:e.fields.MiddleName,name:"MiddleName",label:"Middle Name",placeholder:"D.",type:"FLOAT"},input_familyName:{initial:e.fields.FamilyName,name:"FamilyName",label:"Last Name",description:"",placeholder:"Smith",type:"FLOAT"},input_short:{initial:e.fields.Short,name:"Short",label:"Headline",placeholder:"I'm an Assistant Professor at ABC University",type:"TEXT"},input_description:{initial:e.fields.Description,rows:6,name:"Description",description:"__Personal Bio__",placeholder:"I work on phage research at ABC University",type:"TEXTAREA"},input_avatarlink:{initial:"",name:"ImageURL",label:"Upload Image from URL",placeholder:"https://phage.directory/icon.png",type:"FLOAT"},input_roles:{initial:e.fields["Roles:Custom"]||e.fields.Roles,name:"Roles",label:"Role",placeholder:"Assistant Professor",type:"INPUT",options:[{value:"Assistant Professor"},{value:"Associate Professor"},{value:"Clinical Coordinator"},{value:"Co-founder"},{value:"Director of Sales & Marketing"},{value:"Doctoral Researcher"},{value:"Founder"},{value:"Government Scientist"},{value:"Graduate Student"},{value:"Group Leader"},{value:"Lab Manager"},{value:"Lecturer"},{value:"MSc Student"},{value:"PhD Research Scholar"},{value:"Postdoc"},{value:"Postdoctoral Fellow"},{value:"Postdoctoral Researcher"},{value:"President"},{value:"Principal Investigator"},{value:"Product Designer"},{value:"Professor"},{value:"Project Director"},{value:"Project Manager"},{value:"Research Fellow"},{value:"Research Governance Manager"},{value:"Research Manager"},{value:"Research Technician"},{value:"Researcher"},{value:"Scientist"},{value:"Undergraduate Student"}]},input_skills:{initial:e.fields.Skills?e.fields.Skills.join(", "):e.fields["Skills:Custom"],name:"Skills",label:"Skills",placeholder:"Bioinformatics",type:"INPUT",options:[{value:"Phage-host interactions"},{value:"Molecular Biology"},{value:"Biotechnology"},{value:"Machine Learning / AI"},{value:"Bioinformatics"},{value:"Teaching"},{value:"Pharmacy"},{value:"Synthetic Biology"},{value:"Microbiology"},{value:"Immunology"},{value:"Analytical Chemistry"},{value:"Structural Biology"}]},input_website:{initial:e.fields.URL,name:"URL",label:"Website URL",description:"",placeholder:"http://abc.edu/johnsmith",type:"FLOAT"},input_email:{initial:e.fields.Email,name:"Email",label:"Public Email Address",placeholder:"johnsmith@abc.edu",type:"FLOAT"},input_twitter:{initial:e.fields["Social:Twitter"],name:"Social:Twitter",label:"Twitter",placeholder:"@johnsmithphage",type:"FLOAT"},input_linkedin:{initial:e.fields["Social:Linkedin"],name:"Social:Linkedin",label:"LinkedIn URL",placeholder:"https://linkedin.com/in/john-smith",type:"FLOAT"},input_googlescholar:{initial:e.fields["Social:GoogleScholar"],name:"Social:GoogleScholar",label:"GoogleScholar URL",placeholder:"https://scholar.google.ca/citations?user=r3PIVU8AAAAJ&hl=en&oi=sra",type:"FLOAT"},input_github:{initial:e.fields["Social:Github"],name:"Social:Github",label:"Github URL",placeholder:"https://github.com/janzheng/",type:"FLOAT"},input_researchgate:{initial:e.fields["Social:ResearchGate"],name:"Social:ResearchGate",label:"ResearchGate URL",placeholder:"https://www.researchgate.net/profile/John_Smith4",type:"FLOAT"},input_publons:{initial:e.fields["Social:Publons"],name:"Social:Publons",label:"Publons URL",placeholder:"https://publons.com/researcher/1669531/jessica-sacher/",type:"FLOAT"},input_socialother:{initial:e.fields["Social:Other"],name:"Social:Other",label:"Other Social URLs",placeholder:"",type:"FLOAT"},input_orcid:{initial:e.fields["Social:ORCID"],name:"Social:ORCID",label:"ORCID Number",placeholder:"https://orcid.org/0000-0002-5306-1902",type:"FLOAT"},input_protocolsio:{initial:e.fields["Social:ProtocolsIO"],name:"Social:ProtocolsIO",label:"ProtocolsIO Profile URL",placeholder:"",type:"FLOAT"}}},computed:{ProfileTitle:function(){return this.profile.fields.Name&&""!=this.profile.fields.Name.trim()?"".concat(this.profile.fields.Name,"'s Profile"):"Brand New Profile!"}},methods:{updateProfile:function(t,data){this.profile.fields[t]=data,this.profile.__ob__.dep.notify(),this.hasChanged=!0,this.updateName()},updateName:function(){var t=this.profile.fields.FirstName||"",e=this.profile.fields.MiddleName||"",r=this.profile.fields.FamilyName||"";this.profile.fields.Name="".concat(t," ").concat(e," ").concat(r)},saveData:function(){var t=c()(k().mark((function t(){var e,r,n,o,l;return k().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=new FormData,this.isSaving=!0,this.message="Saving your profile...",r={profileslug:this.profileslug,passcode:this.passcode,type:"UPDATE",table:this.tableType,avatar_link:this.avatar_link,avatar_clear:this.avatar_clear,data:this.profile.fields},this.files&&this.files[0]&&(console.log("adding avatar ::: ",this.files[0]),e.append("avatar",this.files[0])),e.append("type","UPDATE"),e.append("profile",JSON.stringify(r)),console.log("Sending profile:",r),t.next=10,h()({method:"post",url:void 0+"/api/profile",data:e,headers:{"Content-Type":"multipart/form-data"}});case 10:(n=t.sent).data&&n.data.meta?(l=n.data.payload,this.profile=l,this.isSaving=!1,this.message="Profile successfully saved!",l.fields.ProfileImage&&l.fields.ProfileImage[0]&&(o=l.fields.ProfileImage[0].url,this.input_avatarlink={initial:"",name:"ImageURL",label:"Image URL",placeholder:"",type:"FLOAT"}),this.files=void 0,this.avatar=o,this.avatar_link=!1,this.avatar_clear=!1):(this.isSaving=!1,this.message="Profile could not be saved.");case 12:case"end":return t.stop()}}),t,this)})));return function(){return t.apply(this,arguments)}}(),setAvatar:function(data){console.log(" >>>>> SET AVATAR ",data),""==data?(this.avatar=void 0,this.profile.fields.ProfileImage=void 0,this.hasChanged=!0):(this.avatar=data,this.avatar_link=data,this.profile.fields.ProfileImage=[{url:data}],this.hasChanged=!0)},clearAvatar:function(){this.files=void 0,this.avatar=void 0,this.profile.fields.ProfileImage=[],this.avatar_clear=!0,this.$refs.avatar.value="",this.hasChanged=!0},uploadAvatar:function(t){var e=this;if(console.log("upload avatar: ",t.target.files),this.files=t.target.files,this.hasChanged=!0,this.files&&this.files[0]){console.log("File: ",this.files[0]);var r=new FileReader;r.onload=function(t){e.avatar=t.target.result},r.readAsDataURL(this.files[0])}}}},x=Object(w.a)(O,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Profile-edit-person"},[r("Template",{attrs:{"sidebar-classes":"--sticky --top-1","grid-classes":"Template--Main-Sidebar _grid-4-1-sm _grid-gap "},scopedSlots:t._u([{key:"header",fn:function(){return[r("h1",{},[t._v(t._s(t.ProfileTitle))]),t._v(" "),r("div",{staticClass:"Profile-edit-preview _margin-top _card _padding"},[r("h6",[t._v("Profile Preview")]),t._v(" "),r("Card",{staticClass:"Profile-edit-preview-card",attrs:{person:t.profile}})],1),t._v(" "),r("div",{staticClass:"Profile-editor _divider-top-half "},[r("h6",[t._v("Personal Profile")]),t._v(" "),r("div",{staticClass:"Profile-edit-background _card _padding _color-bg-white"},[r("p",{staticClass:"_font-bold"},[t._v("Background Information")]),t._v(" "),r("div",{staticClass:"_grid-4"},[r("div",{staticClass:"Profile-edit-firstname"},[r("FormletInputFloat",{attrs:{input:t.input_firstName,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("FirstName",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-middlename"},[r("FormletInputFloat",{attrs:{input:t.input_middleName,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("MiddleName",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-familyname"},[r("FormletInputFloat",{attrs:{input:t.input_familyName,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("FamilyName",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-title"},[r("FormletInputFloat",{attrs:{input:t.input_title,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Title",data)}}})],1)]),t._v(" "),r("div",{staticClass:"Profile-edit-short _grid-3-2 _margin-top-2"},[r("FormletInputFloat",{key:t.input_short.name,attrs:{input:t.input_short,type:"text","input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Short",data)}}}),t._v(" "),r("FormletInputFloat",{key:t.input_roles.name,attrs:{input:t.input_roles,type:"text","input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Roles:Custom",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-skills _margin-top-2"},[r("FormletInputFloat",{attrs:{input:t.input_skills,type:"text","input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Skills:Custom",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-description _margin-top-2"},[r("FormletTextArea",{attrs:{input:t.input_description,"submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Description",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-avatar-section _margin-top-2"},[r("div",{staticClass:"_font-bold _margin-bottom-half"},[t._v("Profile Image")]),t._v(" "),r("div",{staticClass:"Profile-avatar-container _card _padding _form-control"},[r("div",{staticClass:"Profile-avatar-grid _flex-row-sm"},[r("div",{staticClass:"Profile-avatar-preview"},[t.avatar?r("div",{staticClass:"_padding-right"},[r("img",{staticStyle:{"max-width":"400px"},attrs:{src:t.avatar}})]):t._e()]),t._v(" "),r("div",{staticClass:"Profile-avatar-control _flex-1"},[r("label",{staticClass:"_button --outline",attrs:{for:"Profile-avatar"}},[t.avatar?r("span",[t._v("Change Profile Image")]):r("span",[t._v("Upload Profile Image")])]),t._v(" "),t.avatar?r("button",{on:{click:t.clearAvatar}},[t._v("Remove Profile Image")]):t._e(),t._v(" "),r("FormletInputFloat",{key:t.input_avatarlink.initial,attrs:{input:t.input_avatarlink,"input-attrs":"--open",type:"text","submit-handler":t.saveData},on:{input:function(data){t.setAvatar(data)}}}),t._v(" "),r("input",{ref:"avatar",staticClass:"Profile-avatar",staticStyle:{display:"none"},attrs:{id:"Profile-avatar",type:"file"},on:{input:t.uploadAvatar}})],1)]),t._v(" "),r("div",{staticClass:"_font-small"},[t._v("Note: your image might be cropped â€” please save to preview your final profile")])])]),t._v(" "),r("div",{staticClass:"Profile-edit-ctabar _margin-top",class:t.hasChanged?"":"--notChanged"},[r("div",{staticClass:"_grid-1-3 _align-vertically"},[r("div",[t.isSaving?t._e():r("button",{staticClass:"_button _width-full _margin-bottom-none-i",on:{click:t.saveData}},[t._v("Save Changes")]),t._v(" "),t.isSaving?r("button",{staticClass:"_button _width-full _margin-bottom-none-i --disabled"},[r("span",{staticClass:"_inine-block _margin-right-2 _spinner"}),t._v(" Saving...")]):t._e()]),t._v(" "),t.message?r("div",{staticClass:"Profile-edit-message _margin-bottom-none-i"},[t._v(t._s(t.message))]):t._e()])])])]),t._v(" "),r("div",{staticClass:"Profile-edit-work _divider-top-half "},[r("h6",[t._v("Lab / Organization Information")]),t._v(" "),r("div",{staticClass:"_card _padding _color-bg-white"},[r("div",{staticClass:"_font-small _margin-top _margin-bottom-2"},[t._v("Note: Weâ€™re still working on this part of the website! Below are the organizations connected to your profile. If you need to add or remove a lab or organization, or if you need to update your organization information, please email us at "),r("a",{attrs:{href:"mailto:support@phage.directory"}},[t._v("support@phage.directory")]),t._v(". If your organization isn't listed on Phage Directory "),r("nuxt-link",{attrs:{to:"/join"}},[t._v("please consider adding it!")])],1),t._v(" "),r("div",{staticClass:"Profile-edit-labs"},[r("div",{staticClass:"Profile-edit-labs-linked _margin-bottom"},[r("div",{},[r("span",{staticClass:"_font-bold"},[t._v("Labs: ")]),t.profile.fields["Orgs:Labs::Name"]?r("span",[t._v(t._s(t.profile.fields["Orgs:Labs::Name"].join(", ")))]):r("span",[t._v("(No labs currently connected to your profile)")])])])]),t._v(" "),r("div",{staticClass:"Profile-edit-orgs"},[r("div",{staticClass:"Profile-edit-orgs-linked _margin-bottom"},[r("div",{},[r("span",{staticClass:"_font-bold"},[t._v("Organizations: ")]),t.profile.fields["Orgs::Names"]?r("span",[t._v(t._s(t.profile.fields["Orgs::Names"].join(", ")))]):r("span",[t._v("(No organizations currently connected to your profile)")])])])])])]),t._v(" "),r("div",{staticClass:"Profile-edit-contact _divider-top-half "},[r("h6",{staticClass:"_font-bold"},[t._v("Contact Information")]),t._v(" "),r("div",{staticClass:"_card _padding _color-bg-white"},[r("div",{staticClass:"Profile-edit-social _grid-3"},[r("div",{staticClass:"Profile-edit-website"},[r("FormletInputFloat",{attrs:{input:t.input_website,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("URL",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-email"},[r("FormletInputFloat",{attrs:{input:t.input_email,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Email",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-twitter"},[r("FormletInputFloat",{attrs:{input:t.input_twitter,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:Twitter",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-linkedin"},[r("FormletInputFloat",{attrs:{input:t.input_linkedin,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:Linkedin",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-googlescholar"},[r("FormletInputFloat",{attrs:{input:t.input_googlescholar,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:GoogleScholar",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-orcid"},[r("FormletInputFloat",{attrs:{input:t.input_orcid,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:ORCID",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-github"},[r("FormletInputFloat",{attrs:{input:t.input_github,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:Github",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-researchgate"},[r("FormletInputFloat",{attrs:{input:t.input_researchgate,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:ResearchGate",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-publons"},[r("FormletInputFloat",{attrs:{input:t.input_publons,"input-attrs":"--open","submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:Publons",data)}}})],1)]),t._v(" "),r("div",{staticClass:"Profile-edit-other"},[r("FormletInputFloat",{attrs:{input:t.input_socialother,"submit-handler":t.saveData},on:{input:function(data){t.updateProfile("Social:Other",data)}}})],1),t._v(" "),r("div",{staticClass:"Profile-edit-ctabar _margin-top",class:t.hasChanged?"":"--notChanged"},[r("div",{staticClass:"_grid-1-3 _align-vertically"},[r("div",[t.isSaving?t._e():r("button",{staticClass:"_button _width-full _margin-bottom-none-i",on:{click:t.saveData}},[t._v("Save Changes")]),t._v(" "),t.isSaving?r("button",{staticClass:"_button _width-full _margin-bottom-none-i --disabled"},[r("span",{staticClass:"_inine-block _margin-right-2 _spinner"}),t._v(" Saving...")]):t._e()]),t._v(" "),t.message?r("div",{staticClass:"Profile-edit-message _margin-bottom-none-i"},[t._v(t._s(t.message))]):t._e()])])])])]},proxy:!0}])})],1)}),[],!1,null,null,null).exports;function T(){T=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,n="function"==typeof Symbol?Symbol:{},l=n.iterator||"@@iterator",c=n.asyncIterator||"@@asyncIterator",d=n.toStringTag||"@@toStringTag";function f(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{f({},"")}catch(t){f=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof _?e:_,l=Object.create(o.prototype),c=new I(n||[]);return l._invoke=function(t,e,r){var n="suspendedStart";return function(o,l){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw l;return N()}for(r.method=o,r.arg=l;;){var c=r.delegate;if(c){var d=x(c,r);if(d){if(d===m)continue;return d}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var f=v(t,e,r);if("normal"===f.type){if(n=r.done?"completed":"suspendedYield",f.arg===m)continue;return{value:f.arg,done:r.done}}"throw"===f.type&&(n="completed",r.method="throw",r.arg=f.arg)}}}(t,r,c),l}function v(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=h;var m={};function _(){}function y(){}function C(){}var P={};f(P,l,(function(){return this}));var w=Object.getPrototypeOf,S=w&&w(w(E([])));S&&S!==e&&r.call(S,l)&&(P=S);var L=C.prototype=_.prototype=Object.create(P);function k(t){["next","throw","return"].forEach((function(e){f(t,e,(function(t){return this._invoke(e,t)}))}))}function O(t,e){var n;this._invoke=function(l,c){function d(){return new e((function(n,d){!function n(l,c,d,f){var h=v(t[l],t,c);if("throw"!==h.type){var m=h.arg,_=m.value;return _&&"object"==o()(_)&&r.call(_,"__await")?e.resolve(_.__await).then((function(t){n("next",t,d,f)}),(function(t){n("throw",t,d,f)})):e.resolve(_).then((function(t){m.value=t,d(m)}),(function(t){return n("throw",t,d,f)}))}f(h.arg)}(l,c,n,d)}))}return n=n?n.then(d,d):d()}}function x(t,e){var r=t.iterator[e.method];if(void 0===r){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,x(t,e),"throw"===e.method))return m;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var n=v(r,t.iterator,e.arg);if("throw"===n.type)return e.method="throw",e.arg=n.arg,e.delegate=null,m;var o=n.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,m):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,m)}function D(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function F(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function I(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(D,this),this.reset(!0)}function E(t){if(t){var e=t[l];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var i=-1,n=function e(){for(;++i<t.length;)if(r.call(t,i))return e.value=t[i],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:N}}function N(){return{value:void 0,done:!0}}return y.prototype=C,f(L,"constructor",C),f(C,"constructor",y),y.displayName=f(C,d,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===y||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,C):(t.__proto__=C,f(t,d,"GeneratorFunction")),t.prototype=Object.create(L),t},t.awrap=function(t){return{__await:t}},k(O.prototype),f(O.prototype,c,(function(){return this})),t.AsyncIterator=O,t.async=function(e,r,n,o,l){void 0===l&&(l=Promise);var c=new O(h(e,r,n,o),l);return t.isGeneratorFunction(r)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},k(L),f(L,d,"Generator"),f(L,l,(function(){return this})),f(L,"toString",(function(){return"[object Generator]"})),t.keys=function(object){var t=[];for(var e in object)t.push(e);return t.reverse(),function e(){for(;t.length;){var r=t.pop();if(r in object)return e.value=r,e.done=!1,e}return e.done=!0,e}},t.values=E,I.prototype={constructor:I,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(F),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return l.type="throw",l.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var i=this.tryEntries.length-1;i>=0;--i){var o=this.tryEntries[i],l=o.completion;if("root"===o.tryLoc)return n("end");if(o.tryLoc<=this.prev){var c=r.call(o,"catchLoc"),d=r.call(o,"finallyLoc");if(c&&d){if(this.prev<o.catchLoc)return n(o.catchLoc,!0);if(this.prev<o.finallyLoc)return n(o.finallyLoc)}else if(c){if(this.prev<o.catchLoc)return n(o.catchLoc,!0)}else{if(!d)throw new Error("try statement without catch or finally");if(this.prev<o.finallyLoc)return n(o.finallyLoc)}}}},abrupt:function(t,e){for(var i=this.tryEntries.length-1;i>=0;--i){var n=this.tryEntries[i];if(n.tryLoc<=this.prev&&r.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var l=o?o.completion:{};return l.type=t,l.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(l)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.finallyLoc===t)return this.complete(e.completion,e.afterLoc),F(e),m}},catch:function(t){for(var i=this.tryEntries.length-1;i>=0;--i){var e=this.tryEntries[i];if(e.tryLoc===t){var r=e.completion;if("throw"===r.type){var n=r.arg;F(e)}return n}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:E(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),m}},t}var D,F,I={components:{Template:r(461).a,EditOrg:S,EditPerson:x},layout:"contentframe",middleware:"pageload",meta:{tableQueries:["_content-copy"]},data:function(){var t=this.$router.history.current.params.slug,e=this.$router.history.current.params.passcode,r=!1,n=!1;return t&&e&&(n=!0,this.getData({slug:t,passcode:e}),r=!0),{isCorrect:r,isLoading:n,profile:null,slug:t,passcode:e,tableType:null,statusMessage:null}},asyncData:(F=c()(T().mark((function t(e){var r,n,o,l;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.route,n=r.params.slug,o=r.params.passcode,l=n&&o,t.abrupt("return",{isCorrect:l});case 5:case"end":return t.stop()}}),t)}))),function(t){return F.apply(this,arguments)}),mounted:function(){this.$segmentize({segment:this.$segment,type:"page",event:"Event/Evergreen2019",data:{path:this.$route.path}})},methods:{getData:(D=c()(T().mark((function t(e){var r,n,o,l,c,d;return T().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.slug,n=e.passcode,o=r||this.slug,l=n||this.passcode,!o||!l){t.next=11;break}return this.statusMessage="Hold on to your shoes, I'm loading!!",this.isLoading=!0,c={profileslug:o,passcode:l,type:"GET"},t.next=9,h.a.post(void 0+"/api/profile",c);case 9:(d=t.sent).data&&d.data.meta?(this.profile=d.data,this.tableType=d.data.meta.table,this.isLoading=!1):(this.isLoading=!1,this.statusMessage="Profile could not be loaded.");case 11:case"end":return t.stop()}}),t,this)}))),function(t){return D.apply(this,arguments)})}},E=Object(w.a)(I,(function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"Profile-edit"},[r("no-ssr",[!t.isCorrect||t.statusMessage||t.isLoading?r("Template",[[t.isCorrect?t._e():r("div",{staticClass:"Profile-unready"},[r("div",{staticClass:"_card _padding"},[r("h5",[t._v("Profile Page")]),t._v(" "),r("p",[t._v("Welcome to the profile page! To find your profile page, please follow the personalized link we sent to your academic or organization email address.\n            ")]),t._v(" "),r("p",[t._v("If you would like an account, please join Phage Directory by "),r("nuxt-link",{attrs:{to:"/join"}},[t._v("visiting the Sign Up page")]),t._v(".\n            ")],1),t._v(" "),r("p",[t._v("If you clicked a personalized link and are still seeing this message, please get in touch with "),r("a",{attrs:{href:"mailto:support@phage.directory"}},[t._v("support@phage.directory")]),t._v(".\n            ")]),t._v(" "),r("p",[t._v("Thanks so much!"),r("br"),t._v("â€” The Phage Directory team\n            ")])])]),t._v(" "),t.isCorrect&&t.isLoading?r("div",{staticClass:"_section-article _margin-center"},[r("div",{},[r("div",{staticClass:"_card _padding"},[r("h4",[r("span",{staticClass:"_inine-block _margin-right-2 _spinner",staticStyle:{bottom:"-3px"}}),t._v("Your profile is loading ...")])])])]):t._e(),t._v(" "),t.statusMessage?r("div",{staticClass:"Profile-error"},[r("div",{staticClass:"_card _padding"},[t._v("\n            "+t._s(t.statusMessage)+"\n          ")])]):t._e()]],2):t._e(),t._v(" "),t.isCorrect&&!t.isLoading?r("div",{},["Organizations"==t.tableType?r("div",[r("EditOrg",{attrs:{profileslug:t.slug,passcode:t.passcode,"profile-prop":t.profile}})],1):r("div",[r("EditPerson",{attrs:{profileslug:t.slug,passcode:t.passcode,"profile-prop":t.profile}})],1)]):t._e()],1)],1)}),[],!1,null,null,null);e.default=E.exports}}]);