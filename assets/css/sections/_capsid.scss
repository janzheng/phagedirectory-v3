

$capsid_: (
  capsid-section-featured: usetheme(silver-lighter), // usetheme(silver-lighter),
  capsid-section-new: usetheme(mono-5),
  capsid-section-new-bright: usetheme(brand-60),
  capsid-section-new-headerbg: usetheme(brand-20),
  capsid-section-meta: usetheme(brand--1),
  capsid-section-meta-bright: usetheme(brand-bright),
  capsid-section-meta-headerbg: usetheme(brand--1),
  capsid-section-jobs: usetheme(pink--1),
  capsid-section-jobs-bright: usetheme(pink-40),
  capsid-section-jobs-headerbg: usetheme(pink-10),
  capsid-section-community: usetheme(yellow-5),
  capsid-section-community-bright: usetheme(yellow-40),
  capsid-section-community-headerbg: usetheme(yellow-20),
);

@include addtheme($capsid_)



.Capsid {

	.Capsid-masthead-title {
		font-weight: normal;
		font-style: italic;
	}
  .Capsid-latest {
      margin-top: $size-7;
      margin-bottom: $size-7;

    // latest stub
    .Capsid-Stub-item {
      // padding-top: $size-2x; // needed when no cover image, but try to always have a cover image...
      padding-bottom: $size-2x;
    }
    .Capsid-lede {
      font-size: usetheme(font-2);
      line-height: usetheme(font-2-lh);
    }
  }
  
  img {
    max-width: 100%;
  }
}
.Capsid-List {
  .Capsid-masthead {
    margin-top: $size-7;
    margin-bottom: $size-6;
  }
}


.Capsid-Signup {
  // used to sign up for Capsid all over the site 
  // two versions: one wide (over articles) and one narrow (in footer);
  
  // box-shadow: 0px 4px 8px rgba(70, 70, 70, 0.1);
  @extend ._card;
  background-color: usetheme(capsid-color); //$color-teal-50;
  border-color: usetheme(capsid-color); //$color-teal-50;

  border-radius: $radius;
  padding: $size;
  // margin-bottom: $size;

  input[type='email'] {
    &:focus, &:hover {
      background-color: usetheme(bg); //$color-bg;
    }
  }
}



// used to display short headlines on Capsid & Tail
.Capsid-Stub {
  
  .Capsid-Stub-latest {
    padding-bottom: $size-quart;
  }
  
  // don't highlight / underline some parts
  a.Capsid-Stub-item {

    &,* {
      text-decoration: none;
    }

    .Capsid-header, .Capsid-lede {
      font-weight: normal;
    }

    h1, h2, h3 {
      text-decoration: underline;
      text-decoration-color: usetheme(active); //$color-links;
      padding-bottom: $size;
    }
    .Capsid-title {
      padding-top: $size;
      padding-bottom: $size;
    }

    h5 {
      // font-size: 34px;
      // line-height: 42px;
      // font-weight: normal;
      padding-bottom: $size-quart;
    }
    &.--featured {
      border-color: usetheme(active); //$color-tertiary;
    
      .Capsid-title {
        padding-top: $size-2;
        padding-bottom: $size-2;
      }
    }
    // emulate a link, but handled in js
    // since might contain nested links
    border-width: $border-thin;
    @extend %ease;
    cursor: pointer;

    &:hover {
      color: usetheme(copy);
      .Capsid-title {
        color: usetheme(active);
      }

      @extend %ease;
      border: $border-thin solid usetheme(active); //$color-tertiary;
      h2 {
        // color: usetheme(capsid-color); // $color-tertiary;
        @extend %ease;
      }
    }

  }

  &.--related .Capsid-lede {
    font-size: usetheme(font-size); // force regular font size for stubs that appear in related articles
    padding-bottom: 0;
  }
}









/* 

  Capsid & Tail Article Styling

 */


// .Capsid-section-featured {
//   background: usetheme(capsid-section-featured);
// }
.Capsid-section-meta {
  background-color: usetheme(capsid-section-meta);

  .Capsid-section-header {
    background-color: usetheme(capsid-section-meta-headerbg);
  }

  .Capsid-section-heading {

    &:before {
      background-color: usetheme(capsid-section-meta-bright);
    }
  }
  ._card {
    border-color: usetheme(capsid-section-meta-headerbg);
  }
}


.Capsid-section-new {
  background-color: usetheme(capsid-section-new);

  .Capsid-section-header {
    background-color: usetheme(capsid-section-new-headerbg);
  }

  .Capsid-section-heading {

    &:before {
      background-color: usetheme(capsid-section-new-bright);
    }
  }
  ._card {
    border-color: usetheme(capsid-section-new-headerbg);
  }
}
.Capsid-section-jobs {
  background-color: usetheme(capsid-section-jobs);

  .Capsid-section-header {
    background-color: usetheme(capsid-section-jobs-headerbg);
  }

  .Capsid-section-heading {

    &:before {
      background-color: usetheme(capsid-section-jobs-bright);
    }
  }
  ._card {
    border-color: usetheme(capsid-section-jobs-headerbg);
  }
}
.Capsid-section-community {
  background: usetheme(capsid-section-community);

  .Capsid-section-header {
    background: usetheme(capsid-section-community-headerbg);
  }

  .Capsid-section-heading {

    &:before {
      background-color: usetheme(capsid-section-community-bright);
    }
  }
  ._card {
    border-color: usetheme(capsid-section-community-headerbg);
  }
}


.Capsid-section {
  // @extend %width-content-paragraph;
  // margin-left: auto;
  // margin-right: auto;
  padding-bottom: $size;

  // padding: $size;
  @include screen-sm {
    // padding: $size-2x;
    // padding-left: $size;
    // padding-right: $size;
  }
}
  .Capsid-section-header {
    // padding-top: $size;

    // @include screen-xs {
    //   padding: $size;
    // }


    .Capsid-section-heading {
      padding: $size-half;
      padding-left: $size-3;
      font-size: usetheme(font-2);
      line-height: usetheme(font-2-lh);
      position: relative;

      &:before {
        content: ' ';
        position: absolute;
        left: 0;
        top: 0;
        height: 100%;
        width: $size-half;
      }
    }

      .Capsid-section-heading-lite {
        font-size: usetheme(font-size);
        line-height: usetheme(lineheight);
      }

    .Capsid-section-heading-description {
      @extend ._font-small;
    }

    h5 {
      padding: 0;
      padding-bottom: $size-half;
    }
  }
  .Capsid-section-content {
    // margin-top: $size;
    padding: $size;
  }

  .Capsid-section-content-wrapper {
    margin-top: $size-half;

    &:first-of-type {
      margin-top: 0;
    }
  }

// capsid card sections are encapsulated in this
.Capsid-item {
  img {
    max-width: 100%;
  }

  &.--featured {
    border-width: $border-thin;
    border-color: usetheme(brand);
  }

  &.--alert {
    border-width: $border-thin;
    border-color: usetheme(pink-active);
  }
}

.Capsid-article {
  margin-top: $size-2;
  @extend ._divider-top;

  .Capsid-lede {
    font-weight: normal;
    font-size: usetheme(font-large);
    line-height: usetheme(font-large) * 1.6;
    padding-bottom: $size;
  }
}




.Capsid-citations {
  .Capsid-bibtex, ul, li {
    @extend %font-mono;
  }
}



















/* 

  Other Article Stylings

 */

.Capsid-cover {
  // cover image
  width: 100%;
  height: 350px;
  // object-fit: cover;

  &.--stub {
    // homepage, highlight, etc.
    max-height: 250px;
  }
}

.Capsid-cite {
  // infobox on how to cite, read time, doi, etc.
  // they may be split up as well
  @extend ._card;
  padding: $size;
  font-size: usetheme(font-small);

  ul {
    padding-top: $size-half;
    padding-bottom: 0;
  }
}
  .Capsid-info-container {
    // padding: $size;
  }


.Capsid-citations {
  ul, li { // used for bibtex
    padding-bottom: 0; 
    margin-bottom: 0;
  }
}


.Capsid-card {
  // .Periodical-card is legacy to the BiomX C&T

  padding: $size;
  background-color: usetheme(card); //$color-ui-lighter;
  border-radius: $radius;
  margin-bottom: $size;
  @extend ._card;
  box-shadow: none;

  &.--callout {
    background-color: usetheme(copy-light); //$color-teal-50;
  }

  &.--light {
    background-color: setheme(highlight); //$color-teal-10;
    font-weight: inherit;
  }

  &.--img {
    img {
      width: 100%;
    }
  }
}

// Some articles have tables / markdown tables
.Capsid {
  table {
    th, td {
      padding: $size-quart;
    }

    margin-top: $size-2;
    margin-bottom: $size-2;
  }

  tbody tr:nth-child(odd) td {
    background-color: $color-ui-light;
  }
}


// specifically for the classroom episode,
// ti
.Classroom-card {
  padding: $size;
  background-color: usetheme(classroom-color); //$color-ui-lighter;
  border-color: usetheme(classroom-color);
  border-radius: $radius;
  margin-bottom: $size;
  @extend ._card;
  box-shadow: none;
}



/* 

  Capsid Author
  - some of these actually come from airtable... :\

 */
.Capsid-author {
  margin-bottom: 0;
  h5 {
    padding-bottom: $size-half;
  }
}
// sometimes it's using a table, for email formatting... these also come from airtable
table.Capsid-author-header {
  td {
    vertical-align: middle;
    padding: $size-half;
  }
}
.Capsid-author img,
.Capsid-authorCard img {
  // margin-right: $size;
  // vertical-align: bottom;
  // display: inline;
  // margin-top: $size/2;
  max-width: 80px;
}
  .Capsid-author-card {
    @extend .Capsid-card;
    padding: $size-half $size;
    padding-top: $size !important;
    background-color: usetheme(bg-lighter); // $color-ui-lighter;
    border-radius: $radius;

    h3, h4, h5 {
      padding-top: $size-half;
    }
  }
  .Dir-card.Capsid-author-short {
    padding: $size-half $size;
    border: 0;
    // padding: 0;
    // background-color: transparent;
    // box-shadow: none;
  }
  .Capsid-author-full {
    
  }


.Capsid-form {
  margin-top: $size;
}

.Capsid-share {
  // @extend .Capsid-card;
  // margin-top: $size-2x;
  // margin-bottom: $size-2x;
  img {
    width: auto;
  }
}

  .Capsid-twitter {
    img {
      vertical-align: middle;
      margin-right: $size/4;
    }
    margin-bottom: $size;
  }




// guest writer prompt + signup
.Capsid-prompt._section-content {
  background-color: usetheme(bg-silver);
  padding-top: $size;
  padding-bottom: $size;
  margin-bottom: 0;
  
  @include screen-xs {
    padding-left: $size/2;
    padding-right: $size/2;
  }
}


.Capsid-disqus {
  padding: $size-2x $size;
  background-color: usetheme(bg-silver);

  @include screen-xs {
    padding-left: $size/2;
    padding-right: $size/2;
  }
}
  #disqus_thread {
    margin: 0 auto;
    @extend %width-content-paragraph;
  }



// ads in Capsid (e.g. signup / leave a note)
.Capsid-insert {
  padding-top: $size-2x;
  padding-bottom: $size;
  background-color: white; // usetheme(mono-0);
}



/* 

  Email Template

 */

.Capsid-email {
  background-color: usetheme(bg);
}




